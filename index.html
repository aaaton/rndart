<html>
  <head>
    <script lang="js" type="module">
      const width = window.innerWidth * 4;
      const height = window.innerHeight * 4;

      function coinFlip() {
        return Math.random() > 0.5;
      }
      function rw() {
        return Math.random() * width;
      }
      function rh() {
        return Math.random() * height;
      }
      function erw() {
        return Math.random() * width * 1.5 - 0.5 * width;
      }
      function erh() {
        return Math.random() * height * 1.5 - 0.5 * height;
      }
      function ra() {
        return Math.random() * 360;
      }
      function color() {
        return `rgba(${Math.random() * 255},${Math.random() * 255},${
          Math.random() * 255
        }, ${Math.random()})`;
      }
      function loopCircle(ctx) {
        const start = {
          x: erw(),
          y: erh(),
          r: rh(),
          sa: ra(),
          ea: ra(),
        };
        const end = {
          x: erw(),
          y: erh(),
          r: rh(),
          sa: ra(),
          ea: ra(),
        };

        const step = Math.round(100 * Math.random());
        for (let i = 0; i < step; i++) {
          ctx.beginPath();
          ctx.arc(
            start.x + (i * (end.x - start.x)) / step,
            start.y + (i * (end.y - start.y)) / step,
            start.r + (i * (end.r - start.r)) / step,
            start.sa + (i * (end.sa - start.sa)) / step,
            start.ea + (i * (end.ea - start.ea)) / step
          );
          ctx.stroke();
          ctx.closePath();
        }
      }
      function vennCircle(ctx) {
        const center = {
          x: erw(),
          y: erh(),
          r: rh(),
          sa: ra(),
          ea: ra(),
        };
        const count = Math.random() * 10;
        const offset = Math.random() * center.r;
        const startAngle = ra();

        for (let i = 0; i < count; i++) {
          const angle = startAngle + (i * 360) / count;

          ctx.beginPath();
          ctx.arc(
            center.x + offset * Math.sin((Math.PI * angle) / 180),
            center.y + offset * Math.cos((Math.PI * angle) / 180),
            center.r,
            center.sa + angle,
            center.ea + angle
          );
          ctx.fill();
        }
      }
      function render() {
        const parent = document.getElementById("parent");
        const canvas = document.createElement("canvas");

        canvas.width = width;
        canvas.height = height;

        const ctx = canvas.getContext("2d");

        ctx.fillStyle = color();
        ctx.fillRect(0, 0, width, height);

        for (let i = 0; i < 50 * Math.random(); i++) {
          ctx.beginPath();
          ctx.fillStyle = color();
          ctx.strokeStyle = color();
          ctx.lineWidth = Math.max(2, Math.random() * 500 - 300);
          if (coinFlip()) {
            ctx.setLineDash([]);
          } else {
            ctx.setLineDash([Math.random() * 300, Math.random() * 300]);
          }

          const selector = Math.random();

          if (selector < 0.25) {
            ctx.fillRect(rw() - width * 0.5, rh() - height * 0.5, rw(), rh());
          } else if (selector < 0.5) {
            ctx.strokeRect(
              rw() - width * 0.25,
              rh() - height * 0.25,
              rw(),
              rh()
            );
          } else if (selector < 0.75) {
            loopCircle(ctx);
          } else {
            vennCircle(ctx);
          }
          ctx.closePath();
        }
        canvas.addEventListener("click", (e) => {
          var link = document.createElement("a");
          link.download = "rndart.png";
          link.href = e.srcElement.toDataURL();
          link.click();
        });
        parent.append(canvas);
      }
      document.addEventListener("DOMContentLoaded", () => {
        for (let i = 0; i < 1; i++) {
          render();
        }
      });
    </script>
    <style>
      body {
        padding: 0;
        margin: 0;
      }
      canvas {
        width: 100%;
        height: auto;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div id="parent"></div>
  </body>
</html>
